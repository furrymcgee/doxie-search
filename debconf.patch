From 4d971424529c5f6d5a62e207f9bd8024af225c35 Mon Sep 17 00:00:00 2001
From: furrymcgee <furrymcgee@lippydanger.jumpingcrab.com>
Date: Wed, 31 Jul 2019 13:05:59 +0200
Subject: [PATCH 1/3] munge

---
 Makefile | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)
 mode change 100644 => 100755 Makefile

diff --git a/Makefile b/Makefile
old mode 100644
new mode 100755
index 37385f21..17d31bff
--- a/Makefile
+++ b/Makefile
@@ -1,4 +1,4 @@
-MUNGE=xargs perl -i.bak -ne ' \
+MUNGE=xargs -L1 perl -i.bak -ne ' \
 		print $$_."\# This file was preprocessed, do not edit!\n" \
 			if m:^\#!/usr/bin/perl:; \
 		$$cutting=1 if /^=/; \
@@ -33,7 +33,7 @@ install-i18n:
 	$(MAKE) -C po install
 
 PERL := perl
-PERL_VENDORLIB := $(shell $(PERL) -MConfig -e 'print $$Config{vendorlib}')
+PERL_VENDORLIB := //$(shell $(PERL) -MConfig -e 'print $$Config{vendorlib}')
 
 # This would probably be easier if we used setup.py ...
 PYTHON2_SUPPORTED := $(shell pyversions -s)
@@ -82,7 +82,7 @@ install-rest:
 	find . -maxdepth 1 -perm /100 -type f -name debconf -or -name debconf-show -or -name debconf-copydb -or -name debconf-communicate -or -name debconf-set-selections -or -name debconf-apt-progress -or -name debconf-escape | \
 		xargs -i install {} $(prefix)/usr/bin
 	# Now strip all pod documentation from all .pm files and scripts.
-	find $(prefix)/$(PERL_VENDORLIB)/ $(prefix)/usr/sbin		\
+	: find $(prefix)/$(PERL_VENDORLIB)/ $(prefix)/usr/sbin		\
 	     $(prefix)/usr/share/debconf/frontend 			\
 	     $(prefix)/usr/share/debconf/*.pl $(prefix)/usr/bin		\
 	     -name '*.pl' -or -name '*.pm' -or -name 'dpkg-*' -or	\
-- 
2.23.0.rc1

From 6475f1318f5f7b535032289950c2cc89e3b633d6 Mon Sep 17 00:00:00 2001
From: Your Name <you@example.com>
Date: Fri, 1 Nov 2019 01:19:54 -0700
Subject: [PATCH 2/3] No candidate position for the addendum

---
 Makefile | 1 -
 1 file changed, 1 deletion(-)
 mode change 100755 => 100644 Makefile

diff --git a/Makefile b/Makefile
old mode 100755
new mode 100644
index 17d31bff..6a10bbc3
--- a/Makefile
+++ b/Makefile
@@ -9,7 +9,6 @@ MUNGE=xargs -L1 perl -i.bak -ne ' \
 	'
 
 all:
-	$(MAKE) -C doc
 	$(MAKE) -C po
 
 clean:
-- 
2.23.0.rc1

From f8487fb3605519c8ed2984c814e9dce6b6a5e547 Mon Sep 17 00:00:00 2001
From: Your Name <you@example.com>
Date: Sun, 10 Nov 2019 11:57:44 +0100
Subject: [PATCH 3/3] prefix

---
 Makefile | 44 ++++++++++++++++++++++----------------------
 1 file changed, 22 insertions(+), 22 deletions(-)

diff --git a/Makefile b/Makefile
index 6a10bbc3..6c1701e2 100644
--- a/Makefile
+++ b/Makefile
@@ -23,9 +23,9 @@ install: install-utils install-python2 install-python3 install-rest
 
 # Anything that goes in the debconf-utils package.
 install-utils:
-	install -d $(prefix)/usr/bin
+	install -d $(prefix)/bin
 	find . -maxdepth 1 -perm /100 -type f -name 'debconf-*' | grep -v debconf-set-selections | grep -v debconf-show | grep -v debconf-copydb | grep -v debconf-communicate | grep -v debconf-apt-progress | grep -v debconf-escape | \
-		xargs -i install {} $(prefix)/usr/bin
+		xargs -i install {} $(prefix)/bin
 
 # Anything that goes in the debconf-i18n package.
 install-i18n:
@@ -36,7 +36,7 @@ PERL_VENDORLIB := //$(shell $(PERL) -MConfig -e 'print $$Config{vendorlib}')
 
 # This would probably be easier if we used setup.py ...
 PYTHON2_SUPPORTED := $(shell pyversions -s)
-PYTHON_SITEDIR = $(prefix)/usr/lib/$(1)/$(if $(filter 2.0 2.1 2.2 2.3 2.4 2.5,$(patsubst python%,%,$(1))),site-packages,dist-packages)
+PYTHON_SITEDIR = $(prefix)/lib/$(1)/$(if $(filter 2.0 2.1 2.2 2.3 2.4 2.5,$(patsubst python%,%,$(1))),site-packages,dist-packages)
 
 # The Python 2 package.
 install-python2:
@@ -47,43 +47,43 @@ install-python2:
 
 # The Python 3 package.
 install-python3:
-	install -d $(prefix)/usr/lib/python3/dist-packages
-	install -m 0644 debconf.py $(prefix)/usr/lib/python3/dist-packages/
+	install -d $(prefix)/lib/python3/dist-packages
+	install -m 0644 debconf.py $(prefix)/lib/python3/dist-packages/
 
 # Install all else.
 install-rest:
 	install -d $(prefix)/etc \
 		$(prefix)/var/cache/debconf \
-		$(prefix)/usr/share/debconf \
-		$(prefix)/usr/share/pixmaps
+		$(prefix)/share/debconf \
+		$(prefix)/share/pixmaps
 	install -m 0644 debconf.conf $(prefix)/etc/
-	install -m 0644 debian-logo.png $(prefix)/usr/share/pixmaps/
+	install -m 0644 debian-logo.png $(prefix)/share/pixmaps/
 	# This one is the ultimate backup copy.
-	grep -v '^#' debconf.conf > $(prefix)/usr/share/debconf/debconf.conf
+	grep -v '^#' debconf.conf > $(prefix)/share/debconf/debconf.conf
 	# Make module directories.
 	find Debconf -type d |grep -v CVS | \
-		xargs -i install -d $(prefix)/$(PERL_VENDORLIB)/{}
+		xargs -i install -d $(PERL_VENDORLIB)/{}
 	# Install modules.
 	find Debconf -type f -name '*.pm' |grep -v CVS | \
-		xargs -i install -m 0644 {} $(prefix)/$(PERL_VENDORLIB)/{}
+		xargs -i install -m 0644 {} $(PERL_VENDORLIB)/{}
 	# Special case for back-compatability.
-	install -d $(prefix)/$(PERL_VENDORLIB)/Debian/DebConf/Client
+	install -d $(PERL_VENDORLIB)/Debian/DebConf/Client
 	cp Debconf/Client/ConfModule.stub \
-		$(prefix)/$(PERL_VENDORLIB)/Debian/DebConf/Client/ConfModule.pm
+		$(PERL_VENDORLIB)/Debian/DebConf/Client/ConfModule.pm
 	# Other libs and helper stuff.
-	install -m 0644 confmodule.sh confmodule $(prefix)/usr/share/debconf/
-	install frontend $(prefix)/usr/share/debconf/
-	install -m 0755 transition_db.pl fix_db.pl $(prefix)/usr/share/debconf/
+	install -m 0644 confmodule.sh confmodule $(prefix)/share/debconf/
+	install frontend $(prefix)/share/debconf/
+	install -m 0755 transition_db.pl fix_db.pl $(prefix)/share/debconf/
 	# Install essential programs.
-	install -d $(prefix)/usr/sbin $(prefix)/usr/bin
+	install -d $(prefix)/sbin $(prefix)/bin
 	find . -maxdepth 1 -perm /100 -type f -name 'dpkg-*' | \
-		xargs -i install {} $(prefix)/usr/sbin
+		xargs -i install {} $(prefix)/sbin
 	find . -maxdepth 1 -perm /100 -type f -name debconf -or -name debconf-show -or -name debconf-copydb -or -name debconf-communicate -or -name debconf-set-selections -or -name debconf-apt-progress -or -name debconf-escape | \
-		xargs -i install {} $(prefix)/usr/bin
+		xargs -i install {} $(prefix)/bin
 	# Now strip all pod documentation from all .pm files and scripts.
-	: find $(prefix)/$(PERL_VENDORLIB)/ $(prefix)/usr/sbin		\
-	     $(prefix)/usr/share/debconf/frontend 			\
-	     $(prefix)/usr/share/debconf/*.pl $(prefix)/usr/bin		\
+	: find $(PERL_VENDORLIB)/ $(prefix)/sbin		\
+	     $(prefix)/share/debconf/frontend 			\
+	     $(prefix)/share/debconf/*.pl $(prefix)/bin		\
 	     -name '*.pl' -or -name '*.pm' -or -name 'dpkg-*' -or	\
 	     -name 'debconf-*' -or -name 'frontend' | 			\
 	     grep -v Client/ConfModule | $(MUNGE)
-- 
2.23.0.rc1

