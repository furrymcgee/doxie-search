From 72c3dbbff05632625459295cdff1faea8f8eeb34 Mon Sep 17 00:00:00 2001
From: furrymcgee <furrymcgee@lippydanger.jumpingcrab.com>
Date: Tue, 30 Jul 2019 15:15:00 +0200
Subject: [PATCH 08/15] type

---
 perl/Debian/Dwww/Common.pm | 40 +++++++++++++++++++-------------------
 scripts/dwww.cgi           |  1 -
 2 files changed, 20 insertions(+), 21 deletions(-)

diff --git a/perl/Debian/Dwww/Common.pm b/perl/Debian/Dwww/Common.pm
index 09dd463..3fe9b6d 100644
--- a/perl/Debian/Dwww/Common.pm
+++ b/perl/Debian/Dwww/Common.pm
@@ -16,31 +16,31 @@ use vars qw(@ISA @EXPORT);
 my $dwww_url = "/cgi-bin/dwww";
 my %href  = # {{{
     (
-        'debiandoc-sgml'=>   "$dwww_url#FILE#?type=application/sgml",
-        'docbook-xml'   =>   "$dwww_url#FILE#?type=text/xml",
-        'doc'           =>   "$dwww_url#FILE#?type=application/msword",
-        'docx'           =>   "$dwww_url#FILE#?type=application/vnd.openxmlformats-officedocument.wordprocessingml.document",
-        'dvi'           =>   "$dwww_url#FILE#?type=application/x-dvi",
-        'html'          =>   "$dwww_url#FILE#?type=html",
+        'debiandoc-sgml'=>   "$dwww_url#FILE#", #?type=application/sgml
+        'docbook-xml'   =>   "$dwww_url#FILE#", #?type=text/xml
+        'doc'           =>   "$dwww_url#FILE#", #?type=application/msword
+        'docx'          =>   "$dwww_url#FILE#", #?type=application/vnd.openxmlformats-officedocument.wordprocessingml.document
+        'dvi'           =>   "$dwww_url#FILE#", #?type=application/x-dvi
+        'html'          =>   "$dwww_url#FILE#", #?type=html
         'info'          =>   "/cgi-bin/info2www?file=",
-        'latex'         =>   "$dwww_url#FILE#?type=application/x-latex",
-        'linuxdoc-sgml' =>   "$dwww_url#FILE#?type=application/sgml",
-        'pdf'           =>   "$dwww_url#FILE#?type=application/pdf",
-        'postscript'    =>   "$dwww_url#FILE#?type=application/postscript",
-        'ps'            =>   "$dwww_url#FILE#?type=application/postscriptps",
-        'rtf'           =>   "$dwww_url#FILE#?type=text/rtf",
-        'sgml'          =>   "$dwww_url#FILE#?type=application/sgml",
-        'tar'           =>   "$dwww_url#FILE#?type=application/tar",
-        'texinfo'       =>   "$dwww_url#FILE#?type=application/x-texinfo",
-        'xls'           =>   "$dwww_url#FILE#?type=application/vnd.ms-excel",
-        'xlsx'          =>   "$dwww_url#FILE#?type=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",
+        'latex'         =>   "$dwww_url#FILE#", #?type=application/x-latex
+        'linuxdoc-sgml' =>   "$dwww_url#FILE#", #?type=application/sgml
+        'pdf'           =>   "$dwww_url#FILE#", #?type=application/pdf
+        'postscript'    =>   "$dwww_url#FILE#", #?type=application/postscript
+        'ps'            =>   "$dwww_url#FILE#", #?type=application/postscriptps
+        'rtf'           =>   "$dwww_url#FILE#", #?type=text/rtf
+        'sgml'          =>   "$dwww_url#FILE#", #?type=application/sgml
+        'tar'           =>   "$dwww_url#FILE#", #?type=application/tar
+        'texinfo'       =>   "$dwww_url#FILE#", #?type=application/x-texinfo
+        'xls'           =>   "$dwww_url#FILE#", #?type=application/vnd.ms-excel
+        'xlsx'          =>   "$dwww_url#FILE#", #?type=application/vnd.openxmlformats-officedocument.spreadsheetml.sheet
         'dwww-url'      =>   "",
-        'text'          =>   "$dwww_url#FILE#?type=text/plain",
+        'text'          =>   "$dwww_url#FILE#", #?type=text/plain
         'pkgsearch'     =>   "$dwww_url?search=",
-        "man"           =>   "$dwww_url#FILE#?type=man", 
+        "man"           =>   "$dwww_url#FILE#", #?type=man
         "runman"        =>   "$dwww_url?type=runman&amp;location=",
         'doc-base'      =>   "$dwww_url?search=#FILE#&amp;searchtype=b",
-        "dir"           =>   "$dwww_url#FILE#/?type=dir",
+        "dir"           =>   "$dwww_url#FILE#/", #?type=dir
         "info"          =>   "/cgi-bin/info2www?file=",
         "file"          =>   "$dwww_url",
         "menu"          =>   "/dwww/menu/",
diff --git a/scripts/dwww.cgi b/scripts/dwww.cgi
index dc0a6e4..d93a49f 100755
--- a/scripts/dwww.cgi
+++ b/scripts/dwww.cgi
@@ -48,7 +48,6 @@ if ($in{'search'} ne '') {
 else {
         $search   = $FALSE;
         $type     = $in{'type'};     # This document is formated in $type.
-        $type     = 'file' unless defined $type;
         $location = $in{'location'}; # It is located at $location.
         $no_pi    = '--no-path-info';
         if ($location eq "") {
-- 
2.23.0.rc1

