From 62b6c7150366e0da8e26fc7bcf008a16265e838c Mon Sep 17 00:00:00 2001
From: Your Name <you@example.com>
Date: Sat, 11 Apr 2020 03:37:23 +0200
Subject: [PATCH] index on (no branch): d59e9f3 Declare fast forward from
 1.5.71

---
 Makefile     | 48 ++++++++++++++++++++++++------------------------
 debian/rules |  4 ++--
 2 files changed, 26 insertions(+), 26 deletions(-)

diff --git debconf/Makefile debconf/Makefile
index 37385f2..78dad29 100644
--- debconf/Makefile
+++ debconf/Makefile
@@ -1,4 +1,4 @@
-MUNGE=xargs perl -i.bak -ne ' \
+MUNGE=xargs -L1 perl -i.bak -ne ' \
 		print $$_."\# This file was preprocessed, do not edit!\n" \
 			if m:^\#!/usr/bin/perl:; \
 		$$cutting=1 if /^=/; \
@@ -24,20 +24,20 @@ install: install-utils install-python2 install-python3 install-rest
 
 # Anything that goes in the debconf-utils package.
 install-utils:
-	install -d $(prefix)/usr/bin
+	install -d $(prefix)/bin
 	find . -maxdepth 1 -perm /100 -type f -name 'debconf-*' | grep -v debconf-set-selections | grep -v debconf-show | grep -v debconf-copydb | grep -v debconf-communicate | grep -v debconf-apt-progress | grep -v debconf-escape | \
-		xargs -i install {} $(prefix)/usr/bin
+		xargs -i install {} $(prefix)/bin
 
 # Anything that goes in the debconf-i18n package.
 install-i18n:
 	$(MAKE) -C po install
 
 PERL := perl
-PERL_VENDORLIB := $(shell $(PERL) -MConfig -e 'print $$Config{vendorlib}')
+PERL_VENDORLIB := //$(shell $(PERL) -MConfig -e 'print $$Config{vendorlib}')
 
 # This would probably be easier if we used setup.py ...
 PYTHON2_SUPPORTED := $(shell pyversions -s)
-PYTHON_SITEDIR = $(prefix)/usr/lib/$(1)/$(if $(filter 2.0 2.1 2.2 2.3 2.4 2.5,$(patsubst python%,%,$(1))),site-packages,dist-packages)
+PYTHON_SITEDIR = $(prefix)/lib/$(1)/$(if $(filter 2.0 2.1 2.2 2.3 2.4 2.5,$(patsubst python%,%,$(1))),site-packages,dist-packages)
 
 # The Python 2 package.
 install-python2:
@@ -48,43 +48,43 @@ install-python2:
 
 # The Python 3 package.
 install-python3:
-	install -d $(prefix)/usr/lib/python3/dist-packages
-	install -m 0644 debconf.py $(prefix)/usr/lib/python3/dist-packages/
+	install -d $(prefix)/lib/python3/dist-packages
+	install -m 0644 debconf.py $(prefix)/lib/python3/dist-packages/
 
 # Install all else.
 install-rest:
 	install -d $(prefix)/etc \
 		$(prefix)/var/cache/debconf \
-		$(prefix)/usr/share/debconf \
-		$(prefix)/usr/share/pixmaps
+		$(prefix)/share/debconf \
+		$(prefix)/share/pixmaps
 	install -m 0644 debconf.conf $(prefix)/etc/
-	install -m 0644 debian-logo.png $(prefix)/usr/share/pixmaps/
+	install -m 0644 debian-logo.png $(prefix)/share/pixmaps/
 	# This one is the ultimate backup copy.
-	grep -v '^#' debconf.conf > $(prefix)/usr/share/debconf/debconf.conf
+	grep -v '^#' debconf.conf > $(prefix)/share/debconf/debconf.conf
 	# Make module directories.
 	find Debconf -type d |grep -v CVS | \
-		xargs -i install -d $(prefix)/$(PERL_VENDORLIB)/{}
+		xargs -i install -d $(PERL_VENDORLIB)/{}
 	# Install modules.
 	find Debconf -type f -name '*.pm' |grep -v CVS | \
-		xargs -i install -m 0644 {} $(prefix)/$(PERL_VENDORLIB)/{}
+		xargs -i install -m 0644 {} $(PERL_VENDORLIB)/{}
 	# Special case for back-compatability.
-	install -d $(prefix)/$(PERL_VENDORLIB)/Debian/DebConf/Client
+	install -d $(PERL_VENDORLIB)/Debian/DebConf/Client
 	cp Debconf/Client/ConfModule.stub \
-		$(prefix)/$(PERL_VENDORLIB)/Debian/DebConf/Client/ConfModule.pm
+		$(PERL_VENDORLIB)/Debian/DebConf/Client/ConfModule.pm
 	# Other libs and helper stuff.
-	install -m 0644 confmodule.sh confmodule $(prefix)/usr/share/debconf/
-	install frontend $(prefix)/usr/share/debconf/
-	install -m 0755 transition_db.pl fix_db.pl $(prefix)/usr/share/debconf/
+	install -m 0644 confmodule.sh confmodule $(prefix)/share/debconf/
+	install frontend $(prefix)/share/debconf/
+	install -m 0755 transition_db.pl fix_db.pl $(prefix)/share/debconf/
 	# Install essential programs.
-	install -d $(prefix)/usr/sbin $(prefix)/usr/bin
+	install -d $(prefix)/sbin $(prefix)/bin
 	find . -maxdepth 1 -perm /100 -type f -name 'dpkg-*' | \
-		xargs -i install {} $(prefix)/usr/sbin
+		xargs -i install {} $(prefix)/sbin
 	find . -maxdepth 1 -perm /100 -type f -name debconf -or -name debconf-show -or -name debconf-copydb -or -name debconf-communicate -or -name debconf-set-selections -or -name debconf-apt-progress -or -name debconf-escape | \
-		xargs -i install {} $(prefix)/usr/bin
+		xargs -i install {} $(prefix)/bin
 	# Now strip all pod documentation from all .pm files and scripts.
-	find $(prefix)/$(PERL_VENDORLIB)/ $(prefix)/usr/sbin		\
-	     $(prefix)/usr/share/debconf/frontend 			\
-	     $(prefix)/usr/share/debconf/*.pl $(prefix)/usr/bin		\
+	find $(PERL_VENDORLIB)/ $(prefix)/sbin		\
+	     $(prefix)/share/debconf/frontend 			\
+	     $(prefix)/share/debconf/*.pl $(prefix)/bin		\
 	     -name '*.pl' -or -name '*.pm' -or -name 'dpkg-*' -or	\
 	     -name 'debconf-*' -or -name 'frontend' | 			\
 	     grep -v Client/ConfModule | $(MUNGE)
diff --git debconf/debian/rules debconf/debian/rules
index 05985d2..e19017e 100755
--- debconf/debian/rules
+++ debconf/debian/rules
@@ -2,10 +2,10 @@
 
 # Ensure that builds are self-hosting, which means I have to use the .pm
 # files in this package, not any that may be on the system.
-export PERL5LIB=.
+export PERL5LIB:=.:$(PERL5LIB)
 
 %:
-	dh $@ --with python2,python3
+	dh $@
 
 override_dh_auto_install:
 	$(MAKE) prefix=`pwd`/debian/debconf-utils install-utils
-- 
2.8.3

